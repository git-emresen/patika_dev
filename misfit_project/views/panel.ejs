<!DOCTYPE html>
<html lang="en">

<head>
   <!-- basic -->
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <!-- mobile metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <!-- site metas -->
   <title>misfit</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">
   <!-- bootstrap css -->
   <link rel="stylesheet" href="../public/css/bootstrap.min.css">
   <!-- style css -->
   <link rel="stylesheet" href="../public/css/style.css">
   <!-- Responsive-->
   <link rel="stylesheet" href="../public/css/responsive.css">
   <!-- fevicon -->
   <link rel="icon" href="../public/images/fevicon.png" type="image/gif" />
   <!-- Scrollbar Custom CSS -->
   <link rel="stylesheet" href="../public/css/jquery.mCustomScrollbar.min.css">
   <!-- Tweaks for older IEs-->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
      media="screen">
   <link rel="stylesheet" href="https://rawgit.com/LeshikJanz/libraries/master/Bootstrap/baguetteBox.min.css">
   <style>
      .card {
         border: none;
         border-radius: 8px;
         transition: transform 0.3s ease, box-shadow 0.3s ease;
         margin-bottom: 20px;
      }

      .card:hover {
         transform: translateY(-5px);
         box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
      }

      .card-title {
         color: #333;
         font-weight: bold;
         margin-bottom: 10px;
      }

      .card-text {
         color: #666;
         font-size: 14px;
         line-height: 1.6;
      }

      .training-info {
         background-color: #f8f9fa;
         padding: 10px 15px;
         border-radius: 5px;
      }

      .training-info p {
         margin-bottom: 8px;
         color: #555;
      }

      .exercises-list {
         background-color: #f0f0f0;
         padding: 10px 15px;
         border-radius: 5px;
         max-height: 150px;
         overflow-y: auto;
      }

      .exercises-list ul {
         margin-bottom: 0;
         padding-left: 20px;
      }

      .exercises-list li {
         color: #555;
         margin-bottom: 5px;
      }

      .badge {
         font-size: 11px;
         padding: 5px 10px;
      }

      .badge-success {
         background-color: #28a745;
      }

      .badge-warning {
         background-color: #ffc107;
         color: #333;
      }

      .badge-danger {
         background-color: #dc3545;
      }

      .btn-primary {
         background-color: #ff6600;
         border-color: #ff6600;
         font-weight: bold;
         transition: background-color 0.3s ease;
      }

      .btn-primary:hover {
         background-color: #e55a00;
         border-color: #e55a00;
      }

      .btn-block {
         display: block;
         width: 100%;
      }

      .title {
         margin-bottom: 30px;
      }

      .title h2 {
         color: #ff6600;
         font-weight: bold;
         font-size: 32px;
      }

      .alert {
         border-radius: 5px;
         padding: 15px;
         margin-top: 20px;
      }
   </style>
   <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<!-- body -->

<body class="main-layout">
   <!-- loader  -->
   <div class="loader_bg">
      <div class="loader"><img src="../public/images/loading.gif" alt="#" /></div>
   </div>
   <!-- end loader -->
   <!-- header -->
   <header>
      <!-- header inner -->
      <div class="header">
         <div class="container">
            <div class="row">
               <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                  <div class="full">
                     <div class="center-desk">
                        <div class="logo">
                           <a href="/index"><img src="../public/images/logo.png" alt="#" /></a>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                  <nav class="navigation navbar navbar-expand-md navbar-dark ">
                     <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04"
                        aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                     </button>
                     <div class="collapse navbar-collapse" id="navbarsExample04">
                        <ul class="navbar-nav mr-auto">
                           <li class="nav-item ">
                              <a class="nav-link" href="/index">Home</a>
                           </li>
                           <li class="nav-item">
                              <a class="nav-link" href="/about">About</a>
                           </li>
                           <li class="nav-item">
                              <a class="nav-link" href="/trainer">Trainer</a>
                           </li>
                           <li class="nav-item ">
                              <a class="nav-link" href="/gallery">Gallery</a>
                           </li>
                           <li class="nav-item">
                              <a class="nav-link" href="/contact">Contact Us</a>
                           </li>
                           <% if(isAuthenticated) { %>
                              <li class="nav-item">
                                 <a class="nav-link" href="/panel">Profile</a>
                              </li>
                              <li class="nav-item">
                                 <a class="nav-link" href="/auth/logout">LOGOUT</a>
                              </li>
                              <% } else { %>
                                 <li class="nav-item">
                                    <a class="nav-link" href="/login">LOGIN</a>
                                 </li>
                           <% } %>
                        </ul>
                     </div>
                  </nav>
               </div>
            </div>
         </div>
      </div>
   </header>
   <!-- end header inner -->
   <!-- end header -->
   <div class="back_re">
      <div class="container">
         <div class="row">
            <div class="col-md-12">
               <div class="title">
                  <h2>PROFILE</h2>
               </div>
            </div>
         </div>
      </div>
   </div>
   <!-- about -->
   <div class="about">
      <div class="container">
         <!-- Mesajlar -->
         <% if(typeof message !== 'undefined' && message) { %>
            <div class="row">
               <div class="col-md-12">
                  <div class="alert alert-success alert-dismissible fade show" role="alert">
                     <strong>Başarılı!</strong> <%= message %>
                     <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                     </button>
                  </div>
               </div>
            </div>
         <% } %>

         <% if(typeof error !== 'undefined' && error) { %>
            <div class="row">
               <div class="col-md-12">
                  <div class="alert alert-danger alert-dismissible fade show" role="alert">
                     <strong>Hata!</strong> <%= error %>
                     <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                     </button>
                  </div>
               </div>
            </div>
         <% } %>

         <div class="row">
            <div class="col-md-12">
               <div class="title">
                  <h2>Available Trainings</h2>
               </div>
            </div>
         </div>

         <% if(trainings && trainings.length > 0) { %>
            <div class="row">
               <% trainings.forEach(training => { %>
                  <div class="col-md-4 mb-4">
                     <div class="card h-100 shadow-sm">
                        <div class="card-body">
                           <h5 class="card-title"><%= training.title %></h5>
                           <p class="card-text"><%= training.description %></p>
                           
                           <div class="training-info mb-3">
                              <p class="mb-2">
                                 <strong>Difficulty:</strong>
                                 <span class="badge badge-<%= training.difficulty === 'Beginner' ? 'success' : training.difficulty === 'Intermediate' ? 'warning' : 'danger' %>">
                                    <%= training.difficulty %>
                                 </span>
                              </p>
                              <p class="mb-2">
                                 <strong>Duration:</strong> <%= training.duration %> minutes
                              </p>
                              <p class="mb-2">
                                 <strong>Exercises:</strong> <%= training.exercises.length %>
                              </p>
                           </div>

                           <div class="exercises-list mb-3">
                              <p><strong>Exercises:</strong></p>
                              <ul class="small">
                                 <% training.exercises.forEach(exercise => { %>
                                    <li><%= exercise.name %> - <%= exercise.sets %> sets x <%= exercise.reps %> reps</li>
                                 <% }); %>
                              </ul>
                           </div>

                           <form action="/training/join" method="POST" style="display: inline;">
                              <input type="hidden" name="trainingId" value="<%= training._id %>">
                              <button type="submit" class="btn btn-primary btn-block">
                                 <i class="fa fa-plus"></i> Join Training
                              </button>
                           </form>
                        </div>
                     </div>
                  </div>
               <% }); %>
            </div>
         <% } else { %>
            <div class="row">
               <div class="col-md-12">
                  <div class="alert alert-info" role="alert">
                     No trainings available at the moment. Please check back later.
                  </div>
               </div>
            </div>
         <% } %>
      </div>
   </div>
   </div>

   <!-- Katıldığım Eğitimler -->
   <div class="about" style="background-color: #f9f9f9;">
      <div class="container">
         <div class="row">
            <div class="col-md-12">
               <div class="title">
                  <h2>My Trainings</h2>
               </div>
            </div>
         </div>

         <% if(userTrainings && userTrainings.length > 0) { %>
            <div class="row">
               <% userTrainings.forEach(userTraining => { %>
                  <div class="col-md-4 mb-4">
                     <div class="card h-100 shadow-sm" style="border-left: 5px solid #ff6600;">
                        <div class="card-body">
                           <h5 class="card-title" style="color: #ff6600;">
                              <i class="fa fa-check-circle"></i> <%= userTraining.workoutId.title %>
                           </h5>
                           <p class="card-text"><%= userTraining.workoutId.description %></p>
                           
                           <div class="training-info mb-3">
                              <p class="mb-2">
                                 <strong>Difficulty:</strong>
                                 <span class="badge badge-<%= userTraining.workoutId.difficulty === 'Beginner' ? 'success' : userTraining.workoutId.difficulty === 'Intermediate' ? 'warning' : 'danger' %>">
                                    <%= userTraining.workoutId.difficulty %>
                                 </span>
                              </p>
                              <p class="mb-2">
                                 <strong>Duration:</strong> <%= userTraining.workoutId.duration %> minutes
                              </p>
                              <p class="mb-2">
                                 <strong>Joined:</strong> <%= new Date(userTraining.assignedAt).toLocaleDateString('tr-TR') %>
                              </p>
                              <p class="mb-2">
                                 <strong>Exercises:</strong> <%= userTraining.workoutId.exercises.length %>
                              </p>
                           </div>

                           <div class="exercises-list mb-3">
                              <p><strong>Exercises:</strong></p>
                              <ul class="small">
                                 <% userTraining.workoutId.exercises.forEach(exercise => { %>
                                    <li><%= exercise.name %> - <%= exercise.sets %> sets x <%= exercise.reps %> reps</li>
                                 <% }); %>
                              </ul>
                           </div>

                           <form action="/training/leave" method="POST" style="display: inline;">
                              <input type="hidden" name="trainingId" value="<%= userTraining.workoutId._id %>">
                              <button type="submit" class="btn btn-danger btn-block" onclick="return confirm('Eğitimden ayrılmak istediğinize emin misiniz?')">
                                 <i class="fa fa-times"></i> Leave Training
                              </button>
                           </form>
                        </div>
                     </div>
                  </div>
               <% }); %>
            </div>
         <% } else { %>
            <div class="row">
               <div class="col-md-12">
                  <div class="alert alert-warning" role="alert">
                     <i class="fa fa-info-circle"></i> You haven't joined any trainings yet. Browse available trainings below and join one!
                  </div>
               </div>
            </div>
         <% } %>
      </div>
   </div>
   <!-- end katıldığım eğitimler -->
   <!--  footer -->
   <footer>
      <div class="footer">
         <div class="container">
            <div class="row">
               <div class="col-md-3">
                  <h3>Link Menu</h3>
                  <ul class="link_menu">
                     <li><a href="/index">Home</a></li>
                     <li><a href="/about"> About</a></li>
                     <li><a href="/trainer">Trainer</a></li>
                     <li><a href="/gallery">Gallery</a></li>
                     <li><a href="/contact">Contact Us</a></li>
                  </ul>
               </div>
               <div class=" col-md-5">
                  <h3>Contact US</h3>
                  <ul class="conta">
                     <li><i class="fa fa-map-marker" aria-hidden="true"></i>Address : Lorem Ipsum is <br>simply dummy
                     </li>
                     <li><i class="fa fa-mobile" aria-hidden="true"></i> Phone : +(1234) 567 890</li>
                     <li> <i class="fa fa-envelope" aria-hidden="true"></i><a href="#">Email : demo@gmail.com</a></li>
                  </ul>
               </div>
               <div class="col-md-4">
                  <h3>News letter</h3>
                  <form class="bottom_form">
                     <input class="enter" placeholder="Enter your email" type="text" name="Enter your email">
                     <button class="sub_btn">subscribe</button>
                  </form>
               </div>
            </div>
         </div>
         <div class="copyright">
            <div class="container">
               <div class="row">
                  <div class="col-md-10 offset-md-1">
                     <p>© 2019 All Rights Reserved. Design by <a href="https://html.design/"> Free Html Templates</a>
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </footer>
   <!-- end footer -->
   <!-- Javascript files-->
   <script src="../public/js/jquery.min.js"></script>
   <script src="../public/js/bootstrap.bundle.min.js"></script>
   <script src="../public/js/jquery-3.0.0.min.js"></script>
   <!-- sidebar -->
   <script src="../public/js/jquery.mCustomScrollbar.concat.min.js"></script>
   <script src="../public/js/custom.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.8.1/baguetteBox.min.js"></script>
   <script>
      baguetteBox.run('.tz-gallery');
   </script>
</body>

</html>